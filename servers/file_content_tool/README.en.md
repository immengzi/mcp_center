# File Content Control Tool MCP (Management Control Program) Specification Document

## 1. Service Introduction
This service is a file content control MCP (Management Control Program) implemented based on core Linux text processing commands (`grep`/`sed`/`awk`/`sort`/`unique`/`echo`). Its core function is to perform **refined operations** such as search, replacement, processing, sorting, deduplication, and content writing on text files of local or remote servers. It provides a flexible and efficient automated toolset for scenarios like log analysis, configuration file modification, and data cleaning.


## 2. Core Tool Information

| Tool Name | Tool Function | Core Input Parameters | Key Return Content |
| ---- | ---- | ---- | ---- |
| `file_grep_tool` | Search for content matching a specified pattern in files via the `grep` command (supports regex, case insensitivity, etc.) | - `file_path`: Target file path (absolute path, required)<br>- `pattern`: Search pattern (supports regex, e.g., "error", required)<br>- `options`: Optional `grep` parameters (e.g., "-n" to show line numbers, "-i" for case insensitivity, optional)<br>- `host`: Remote hostname/IP (default `localhost`, omit for local operations)<br>- `port`: SSH port (default 22, used for remote operations)<br>- `username`: SSH username (default `root`, required for remote operations)<br>- `password`: SSH password (required for remote operations) | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Local file search completed")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`: Target file path<br>&nbsp;&nbsp;- `result`: List of matching results (one matching item per line) |
| `file_sed_tool` | Replace content matching a pattern in files via the `sed` command (supports global replacement, in-place file modification) | - `file_path`: Target file path (absolute path, required)<br>- `pattern`: Replacement pattern (e.g., "s/old/new/g", `g` for global replacement, required)<br>- `in_place`: Whether to modify the original file directly (boolean, default `False`, only output results)<br>- `options`: Optional `sed` parameters (e.g., "-i.bak" to back up the original file, optional)<br>- `host`/`port`/`username`/`password`: Same as `file_grep_tool` | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Remote sed execution succeeded")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`: Target file path<br>&nbsp;&nbsp;- `result`: Content after replacement (returned when `in_place=False`) |
| `file_awk_tool` | Perform advanced text file processing via the `awk` command (supports column extraction, conditional filtering) | - `file_path`: Target file path (absolute path, required)<br>- `script`: `awk` processing script (e.g., "'{print $1,$3}'" to extract columns 1 and 3, required)<br>- `options`: Optional `awk` parameters (e.g., "-F:" to set colon as delimiter, optional)<br>- `host`/`port`/`username`/`password`: Same as `file_grep_tool` | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Local awk processing succeeded")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`: Target file path<br>&nbsp;&nbsp;- `result`: List of processing results (one result item per line) |
| `file_sort_tool` | Sort text files via the `sort` command (supports column-based sorting, ascending/descending order) | - `file_path`: Target file path (absolute path, required)<br>- `options`: Optional `sort` parameters (e.g., "-n" for numeric sorting, "-k2" for sorting by column 2, "-r" for reverse order, optional)<br>- `output_file`: Output path for sorted results (optional, no file saved by default)<br>- `host`/`port`/`username`/`password`: Same as `file_grep_tool` | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Remote sorting completed")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`/`output_file`: Target file/output file path<br>&nbsp;&nbsp;- `result`: List of sorted results (returned when `output_file` is empty) |
| `file_unique_tool` | Deduplicate text files via the `unique` command (supports duplicate count statistics) | - `file_path`: Target file path (absolute path, required)<br>- `options`: Optional `unique` parameters (e.g., "-u" to show only unique lines, "-c" to count duplicates, optional)<br>- `output_file`: Output path for deduplicated results (optional, no file saved by default)<br>- `host`/`port`/`username`/`password`: Same as `file_grep_tool` | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Local deduplication completed")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`/`output_file`: Target file/output file path<br>&nbsp;&nbsp;- `result`: List of deduplicated results (returned when `output_file` is empty) |
| `file_echo_tool` | Write content to files via the `echo` command (supports overwrite/append modes) | - `content`: Content to be written (e.g., "Hello World", required)<br>- `file_path`: Target file path (absolute path, required)<br>- `append`: Whether to append content (boolean, default `False`, overwrites the original file)<br>- `host`/`port`/`username`/`password`: Same as `file_grep_tool` | - `success`: Whether the operation succeeded (boolean)<br>- `message`: Operation result description (e.g., "Local writing succeeded")<br>- `data`: Dictionary containing operation details<br>&nbsp;&nbsp;- `host`: Hostname/IP of the operation<br>&nbsp;&nbsp;- `file_path`: Target file path<br>&nbsp;&nbsp;- `action`: Operation type ("overwrite" for overwrite/"append" for append) |


## 3. Tool Usage Instructions
1. **Local Operation Rules**:  
   Omit the `host`, `username`, and `password` parameters. Operations are performed on the local machine (`localhost` by default). Only core business parameters such as `file_path`, `pattern` (or `script`/`content`) need to be provided.
   
2. **Remote Operation Rules**:  
   The `host` (remote host IP/hostname), `username` (SSH username), and `password` (SSH password) must be provided. The `port` is optional (default 22). **Absolute paths** (e.g., `/var/log/syslog`) must be used for remote file paths to avoid "file not found" issues caused by relative paths.

3. **Command Parameter Explanation**:  
   - The `options` parameter of all tools must follow the syntax of native Linux commands (e.g., "-i" for `grep`, "-i.bak" for `sed`); custom parameters are not supported.  
   - The `pattern` of `file_sed_tool` must include "s/" (replacement identifier), e.g., "s/old_value/new_value/g" means globally replacing "old_value" with "new_value".  
   - The `script` of `file_awk_tool` must be enclosed in single quotes (e.g., "'{print $1}'") to ensure the validity of column extraction, conditional judgment, and other logic.


## 4. Notes
- **Permission Control**: Corresponding permissions are required to operate files (local operations may need `sudo`, and remote operations require the SSH user to have `r` (read)/`w` (write) permissions for the target file, which can be adjusted via the `chmod` command).
- **Large File Processing**: When processing GB-level large files, it is recommended to save results to a file via the `output_file` parameter to avoid memory overflow (returning result lists directly may occupy a large amount of memory).
- **Special Character Handling**: Single quotes in `content` (for `file_echo_tool`) and `pattern` (for `file_grep_tool`) need to be escaped in advance (the tool has built-in single quote escaping logic, so manual handling is not required) to avoid command syntax errors.
- **System Compatibility**: Some parameters of commands like `awk`/`sed` may vary by OS version (e.g., the `sed` backup parameter format is the same for CentOS and Ubuntu, but some extended functions differ). It is recommended to use `get_kill_signals` (process control tool) or the `man` command to confirm the parameters supported by the target system.
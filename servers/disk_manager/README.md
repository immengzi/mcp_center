# 系统信息采集与监控MCP（管理控制程序）规范文档
## 一、服务介绍
本服务是一款功能全面的系统信息采集与监控MCP（管理控制程序），基于`psutil`库、`SSH`协议及系统原生命令（如`top`、`ps`、`free`等），实现对本地机器及远程目标设备的**进程、CPU、内存、磁盘、网络、操作系统、DNS** 等多维度信息的精准采集，同时支持网络连通性测试与性能数据跟踪，为系统资源监控、故障排查、安全分析提供完整的基础数据支撑，适配中文与英文双语言配置，满足不同场景下的使用需求。


## 二、核心工具信息
| 工具名称 | 工具功能 | 核心输入参数 | 关键返回内容 |
| ---- | ---- | ---- | ---- |
| `top_collect_tool` | 获取目标设备（本地/远程）中**内存占用排名前k个**的进程信息，k支持自定义配置 | - `host`：远程主机名/IP（本地采集可不填）<br>- `k`：需获取的进程数量（默认5） | 进程列表（含`pid`进程ID、`name`进程名称、`memory`内存使用量（MB）） |
| `get_process_info_tool` | 查询指定PID进程的**详细运行信息**，支持本地与远程进程信息获取 | - `host`：远程主机名/IP（本地查询可不填）<br>- `pid`：需查询的进程ID（必传，且为正整数） | 进程详细字典（含`status`状态、`create_time`创建时间、`cpu_times`CPU时间、`memory_info`内存信息、`open_files`打开文件列表、`connections`网络连接等） |
| `change_name_to_pid_tool` | 根据进程名称反向查询对应的**PID列表**，解决“已知进程名查ID”的场景需求 | - `host`：远程主机名/IP（本地查询可不填）<br>- `name`：需查询的进程名称（必传，不能为空） | 以空格分隔的PID字符串（如“1234 5678”） |
| `get_cpu_info_tool` | 采集目标设备的CPU硬件与使用状态信息，包括核心数、频率、核心使用率 | - `host`：远程主机名/IP（本地采集可不填） | CPU信息字典（含`physical_cores`物理核心数、`total_cores`逻辑核心数、`max_frequency`最大频率（MHz）、`cpu_usage`各核心使用率（%）等） |
| `memory_anlyze_tool` | 分析目标设备的内存使用情况，计算总内存、可用内存及使用率 | - `host`：远程主机名/IP（本地采集可不填） | 内存信息字典（含`total`总内存（MB）、`available`可用内存（MB）、`used`已用内存（MB）、`percent`内存使用率（%）等） |
| `get_disk_info_tool` | 采集目标设备的磁盘分区信息与容量使用状态，过滤临时文件系统（tmpfs/devtmpfs） | - `host`：远程主机名/IP（本地采集可不填） | 磁盘列表（含`device`设备名、`mountpoint`挂载点、`fstype`文件系统类型、`total`总容量（GB）、`percent`磁盘使用率（%）等） |
| `get_os_info_tool` | 获取目标设备的操作系统类型与版本信息，适配OpenEuler、Ubuntu、CentOS等多系统 | - `host`：远程主机名/IP（本地采集可不填） | 操作系统信息字符串（如“OpenEuler 22.03 LTS”或“Ubuntu 20.04.5 LTS”） |
| `get_network_info_tool` | 采集目标设备的网络接口信息，包括IP地址、MAC地址、接口启用状态 | - `host`：远程主机名/IP（本地采集可不填） | 网络接口列表（含`interface`接口名、`ip_address`IP地址、`mac_address`MAC地址、`is_up`接口是否启用（布尔值）等） |
| `write_report_tool` | 将系统信息分析结果写入本地报告文件，自动生成带时间戳的文件路径 | - `report`：报告内容字符串（必传，不能为空） | 报告文件路径字符串（如“/reports/system_report_20240520_153000.txt”） |
| `telnet_test_tool` | 测试目标主机指定端口的Telnet连通性，验证端口开放状态 | - `host`：远程主机名/IP（必传）<br>- `port`：端口号（1-65535，必传） | 连通性结果（布尔值：`True`成功，`False`失败） |
| `ping_test_tool` | 测试目标主机的ICMP Ping连通性，验证主机网络可达性 | - `host`：远程主机名/IP（必传） | 连通性结果（布尔值：`True`成功，`False`失败） |
| `get_dns_info_tool` | 采集目标设备的DNS配置信息，包括DNS服务器列表与搜索域 | - `host`：远程主机名/IP（本地采集可不填） | DNS信息字典（含`nameservers`DNS服务器列表、`search`搜索域列表） |
| `perf_data_tool` | 采集目标设备的实时性能数据，支持“指定进程”或“全系统”性能监控 | - `host`：远程主机名/IP（本地采集可不填）<br>- `pid`：进程ID（全系统监控可不填） | 性能数据字典（含`cpu_usage`CPU使用率（%）、`memory_usage`内存使用率（%）、`io_counters`I/O统计信息） |


## 三、待开发需求
1. **恶意进程智能识别功能**：基于`perf_data_tool`与`top_collect_tool`的基础数据，新增进程风险评估维度（如异常CPU占用波动、内存泄漏特征、进程路径合法性、无签名进程识别等），建立恶意进程评分模型，自动标记高风险进程并触发告警。
2. **性能数据可视化与趋势分析**：新增历史性能数据存储（如MySQL/InfluxDB），开发时间序列图表功能（如CPU/内存使用率趋势图、进程IO变化曲线），支持按时间范围查询与导出分析报告。
3. **多主机批量监控与管理**：扩展远程主机配置功能，支持批量导入主机列表、分组管理，新增“一键批量采集”“异常主机筛选”功能，提升多设备集群的监控效率。
4. **自定义告警规则配置**：允许用户自定义阈值告警（如CPU使用率持续5分钟超80%、磁盘使用率超90%），支持邮件、短信、企业微信等多渠道告警通知，实现主动故障预警。
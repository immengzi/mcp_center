# Specification Document for Sar Command Information Collection MCP (Management Control Program)

## 1. Service Introduction
This service is an MCP (Management Control Program) that implements system resource monitoring based on the `sar` command. Its core functions are system resource monitoring and fault diagnosis. By collecting metrics such as CPU, memory, disk I/O, and network over time, it analyzes the periodic patterns of resource usage to assist in capacity planning and anomaly detection. It also supports historical analysis, allowing users to trace back performance issues from a specific period in the past.

## 2. Core Tool Information
| Tool Name | Tool Function | Core Input Parameters | Key Return Content |
| ---- | ---- | ---- | ---- |
| `sar_cpu_collect_tool` | Analyze the periodic patterns of CPU usage | - `host`: Remote hostname/IP (not required for local collection)<br>- `interval`: Monitoring time interval<br>- `count`: Number of monitoring times | Collected metrics list: Includes `timestamp` for the collection time point, `user` for the percentage of CPU used by user space programs, `nice` for the percentage of CPU used by low-priority user processes, `system` for the percentage of CPU used by kernel space programs, `iowait` for the percentage of time the CPU waits for disk I/O operations, `steal` for the percentage of CPU time used by other virtual machines in a virtualized environment, `idle` for the percentage of CPU idle time |
| `sar_memory_collect_tool` | Analyze the periodic patterns of memory resource usage | - `host`: Remote hostname/IP (not required for local collection)<br>- `interval`: Monitoring time interval<br>- `count`: Number of monitoring times | Collected metrics list: Includes `timestamp` for the collection time point, `kbmemfree` for the amount of physical free memory, `kbavail` for the actual available memory, `kbmemused` for the amount of physical memory used, `memused` for the percentage of used memory out of total physical memory, `kbbuffers` for the memory used by kernel buffers, `kbcached` for the memory used by kernel cache, `kbcommit` for the total amount of memory required by the current workload, `commit` for the percentage of kbcommit out of the system's total available memory, `kbactive` for active memory, `kbinact` for inactive memory, `kbdirty` for the amount of dirty data waiting to be written to disk |
| `sar_disk_collect_tool` | Analyzes the periodic patterns of disk IO usage | - `host`: Remote hostname/IP (not required for local collection)<br>- `interval`: Monitoring time interval<br>- `count`: Number of monitoring instances | Collected metrics list: Includes `timestamp` for the collection time point, `name` for the disk device name, `tps` for transactions per second, `rkB_s` for data read per second, `wkB_s` for data written per second, `dkB_s` for data discarded per second, `areq-sz` for average data size per I/O request, `aqu-sz` for average I/O request queue length, `await` for average wait time per I/O request, `util` for device bandwidth utilization |
| `sar_network_collect_tool` | Analyzes the periodic patterns of network traffic | - `host`: Remote hostname/IP (not required for local collection)<br>- `interval`: Monitoring time interval<br>- `count`: Number of monitoring instances | Collected metrics list: Includes `timestamp` for the collection time point, `iface` for the network interface name, `rxpck_s` for packets received per second, `txpck_s` for packets transmitted per second, `rxkB_s` for data received per second, `txkB_s` for data transmitted per second, `rxcmp_s` for compressed packets received per second, `txcmp_s` for compressed packets transmitted per second, `rxmcst_s` for multicast packets received per second, `ifutil` for network interface bandwidth utilization |
| `sar_cpu_historicalinfo_collect_tool` | Conduct historical state analysis to investigate CPU performance issues over a past period | - `host`: Remote hostname/IP (not required for local queries)<br>- `file`: Log file for sar analysis <br>- `starttime`: Start time of the analysis<br>- `endtime`: End time of the analysis | Metrics collected: `timestamp` collection time point, `user` percentage of CPU used by user space programs, `nice` percentage of CPU used by low-priority user processes, `system` percentage of CPU used by kernel space programs, `iowait` percentage of time CPU waits for disk I/O operations, `steal` percentage of CPU time used by other virtual machines in a virtualized environment, `idle` percentage of CPU idle time |
| `sar_memory_historicalinfo_collect_tool` | Conduct historical state analysis to investigate memory performance issues over a past period | - `host`: Remote hostname/IP (not required for local queries)<br>- `file`: Log file for sar analysis <br>- `starttime`: Start time of the analysis<br>- `endtime`: End time of the analysis | Metrics collected: `timestamp` collection time point, `kbmemfree` amount of physical free memory, `kbavail` actual available memory, `kbmemused` used physical memory, `memused` percentage of used memory out of total physical memory, `kbbuffers` memory used by kernel buffers, `kbcached` memory used by kernel cache, `kbcommit` total memory required for the current workload, `commit` percentage of kbcommit out of total system available memory, `kbactive` active memory, `kbinact` inactive memory, `kbdirty` amount of dirty data waiting to be written to disk |
| `sar_disk_historicalinfo_collect_tool` | Conduct historical state analysis to investigate disk IO performance issues over a past period | - `host`: Remote hostname/IP (not required for local queries)<br>- `file`: Log file for sar analysis <br>- `starttime`: Start time of the analysis<br>- `endtime`: End time of the analysis | Metrics collected: Includes `timestamp` collection time point, `name` disk device name, `tps` transactions per second, `rkB_s` data read per second, `wkB_s` data written per second, `dkB_s` data discarded per second, `areq-sz` average data size per I/O request, `aqu-sz` average I/O request queue length, `await` average wait time per I/O request, `util` device bandwidth utilization |
| `sar_network_historicalinfo_collect_tool` | Conduct historical state analysis to investigate network performance issues over a past period | - `host`: Remote hostname/IP (not required for local queries)<br>- `file`: Log file for sar analysis <br>- `starttime`: Start time of the analysis<br>- `endtime`: End time of the analysis | Metrics collected: Includes `timestamp` collection time point, `iface` network interface name, `rxpck_s` packets received per second, `txpck_s` packets sent per second, `rxkB_s` data received per second, `txkB_s` data sent per second, `rxcmp_s` compressed packets received per second, `txcmp_s` compressed packets sent per second, `rxmcst_s` multicast packets received per second, `ifutil` network interface bandwidth utilization |

## 3. To-be-developed Requirements

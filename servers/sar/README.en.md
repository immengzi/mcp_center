# Specification Document for Sar Command Information Collection MCP (Management Control Program)

## 1. Service Introduction
This service is an MCP (Management Control Program) that implements system resource monitoring based on the `sar` command. Its core functions are system resource monitoring and fault diagnosis. By collecting metrics such as CPU, memory, disk I/O, and network over time, it analyzes the periodic patterns of resource usage to assist in capacity planning and anomaly detection. It also supports historical analysis, allowing users to trace back performance issues from a specific period in the past.

## 2. Core Tool Information
| Tool Name | Tool Function | Core Input Parameters | Key Return Content |
| ---- | ---- | ---- | ---- |
| `sar_collect_tool` | Analyze periodic patterns of resource usage | - `host`: Remote hostname/IP (not required for local collection)<br>- `device`: Which aspect of status to analyze (currently supports `-u`, `-r`, `-d`)<br>- `interval`: Monitoring time interval<br>- `count`: Number of monitoring times | List of collected metrics:<br>When collecting CPU-related metrics: (including `user` percentage of CPU used by user space programs, `nice` percentage of CPU used by low-priority user processes, `system` percentage of CPU used by kernel space programs, `iowait` percentage of time CPU waits for disk I/O operations, `steal` percentage of CPU time used by other virtual machines in a virtualized environment, `idle` percentage of CPU idle time);<br>When collecting memory-related metrics: (including `kbmemfree` amount of physical free memory, `kbavail` actual available memory, `kbmemused` used physical memory, `memused` percentage of used memory to total physical memory, `kbbuffers` memory used by kernel buffers, `kbcached` memory used by kernel cache, `kbcommit` total memory required for current workload, `commit` percentage of kbcommit to total system available memory, `kbactive` active memory, `kbinact` inactive memory, `kbdirty` amount of dirty data waiting to be written to disk);<br>When collecting disk IO-related metrics: (including `name` disk device name, `tps` transactions per second, `rkB_s` data read per second, `wkB_s` data written per second, `dkB_s` data discarded per second, `areq-sz` average data size per I/O request, `aqu-sz` average I/O request queue length, `await` average wait time per I/O request, `util` device bandwidth utilization) |
| `sar_historicalinfo_collect_tool` | Conduct historical status analysis to investigate performance issues over a past period | - `host`: Remote hostname/IP (not required for local queries)<br>- `device`: Aspect of status to analyze (currently supports `-u`, `-r`, `-d`)<br>- `file`: Log file for sar analysis<br>- `starttime`: Start time of the analysis<br>- `endtime`: End time of the analysis | Metrics collection list:<br>When collecting CPU-related metrics: (including `user` percentage of CPU used by user space programs, `nice` percentage of CPU used by low-priority user processes, `system` percentage of CPU used by kernel space programs, `iowait` percentage of time CPU waits for disk I/O operations, `steal` percentage of CPU time used by other virtual machines in a virtualized environment, `idle` percentage of CPU idle time);<br>When collecting memory-related metrics: (including `kbmemfree` amount of physical free memory, `kbavail` actual available memory, `kbmemused` used physical memory, `memused` percentage of used memory to total physical memory, `kbbuffers` memory used by kernel buffers, `kbcached` memory used by kernel cache, `kbcommit` total memory required for the current workload, `commit` percentage of kbcommit to total system available memory, `kbactive` active memory, `kbinact` inactive memory, `kbdirty` amount of dirty data waiting to be written to disk);<br>When collecting disk IO-related metrics: (including `name` disk device name, `tps` transactions per second, `rkB_s` data read per second, `wkB_s` data written per second, `dkB_s` data discarded per second, `areq-sz` average data size per I/O request, `aqu-sz` average I/O request queue length, `await` average wait time per I/O request, `util` device bandwidth utilization) |

## 3. To-be-developed Requirements
